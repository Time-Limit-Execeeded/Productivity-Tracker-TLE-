<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Tracker - Student Productivity Center</title>
  <link rel="stylesheet" href="Tracker.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;800&display=swap" rel="stylesheet" />
</head>
<body>

  <!-- Sidebar -->
  <div class="sidebar" id="sidebar">
    <a href="index.html"target="_blank"><h3>Home</h3></a>
    <br>
    <a href="pomodoro.html"target="_blank"><h3>Pomodoro</h3></a>
    <br>
    <a href="habit.html"target="_blank" tr><h3>Habit Tracker</h3></a>
    <br>
    <a href="checklist.html"target="_blank"><h3>Checklist</h3></a>
    <br>
    <a href="leaderboard.html"target="_blank"><h3>Leaderboard</h3></a>
    <br>
    <a href="index.html"target="_blank"><h3>Login</h3></a>
  </div>

  <!-- Toggle Arrow -->
  <div class="toggle-btn" id="toggleBtn">
    <span>âž¤</span>
  </div>

  <!-- Background video -->
  <video autoplay muted loop playsinline preload="auto" id="bg-video">
    <source src="jellyfish.mp4" type="video/mp4" />
    Your browser does not support HTML5 video.
  </video>
  <div class="overlay"></div>

  <main class="tracker-page">
    <section id="tracker" class="card">
      <!-- Tracker Header -->
      <h1 class="tracker-title">Tracker</h1>

      <!-- Stats Row -->
      <div class="stats-row">
        <p><strong>Best Streak:</strong> <span id="bestStreak">0</span> hours</p>
        <p><strong>Total Focused Minutes:</strong> <span id="totalMinutes">0</span></p>
        <p><strong>Total Tasks Done:</strong> <span id="totalTasks">0</span></p>
      </div>
      
      <!-- Progress Bar Section -->
      <div class="progress-section">
        <label for="progressBar"><strong>Today's Progress (Focused Minutes / 960 min):</strong></label><br>
        <progress id="progressBar" value="0" max="100"></progress>
        <div class="progress-info">
          <small>Shows percentage of day spent in focused work</small>
        </div>
      </div>
      
      <!-- Goal Setting Section -->
      <div class="goal-section card">
        <label for="dailyGoal"><strong>Set Study Goal (min):</strong></label><br>
        <input type="number" id="dailyGoal" min="1" placeholder="Enter minutes"><br>
        <button onclick="setGoal()">Set Goal</button>
      </div>

      <!-- Notes Section -->
      <div class="notes-section card">
        <label for="quickNotes"><strong>Quick Notes</strong></label><br>
        <textarea id="quickNotes" rows="3" placeholder="Write your notes here..."></textarea><br>
        <button onclick="saveNotes()">Save</button>
      </div>

      <!-- Completed Tasks Bar Chart Section -->
      <div class="chart-section card">
        <h3 class="chart-title">Completed Tasks Analysis</h3>
        <div class="chart-container">
          <canvas id="taskChart" width="800" height="400" aria-label="Completed tasks duration chart"></canvas>
        </div>
        <div class="chart-info">
          <p class="chart-description">This chart shows the duration of your completed tasks. It updates automatically when you complete new tasks.</p>
        </div>
      </div>

      <!-- Stats Pie Chart Section -->
      <div class="chart-section card">
        <h3 class="chart-title">Productivity Statistics</h3>
        <div class="chart-container">
          <canvas id="statsPieChart" width="400" height="400" aria-label="Productivity statistics pie chart"></canvas>
        </div>
        <div class="chart-info">
          <p class="chart-description">This pie chart shows your 24-hour daily breakdown: focused work time, 6-hour sleep, and other activities.</p>
        </div>
      </div>

    </section>
  </main>

  <!-- Another Background video (Optional, remove if not needed) -->
  <video autoplay muted loop playsinline preload="auto" id="bg-video">
    <source src="Fishes.mp4" type="video/mp4" />
    Your browser does not support HTML5 video.
  </video>

  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="Tracker.js"></script>

  <!-- Sidebar Toggle Script -->
  <script>
    const sidebar = document.getElementById('sidebar');
    const toggleBtn = document.getElementById('toggleBtn');

    toggleBtn.addEventListener('click', () => {
      sidebar.classList.toggle('open');
    });

    // Chart initialization
    window.addEventListener('load', function() {
      console.log('Window loaded, ensuring chart initialization...');
      if (typeof initializeTracker === 'function') {
        initializeTracker();
      } else {
        console.log('initializeTracker function not found, trying direct initialization...');
        setTimeout(() => {
          if (typeof initializeTracker === 'function') {
            initializeTracker();
          }
        }, 500);
      }
    });
  </script>
</body>
</html>
